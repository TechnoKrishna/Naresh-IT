Link :- https://chatgpt.com/share/691a0dd5-2c94-8004-853e-5a6c2be07dcb

‚úÖ JVM Linking + Static Concepts

The entire process happens when a .class file is loaded into JVM.
JVM loading happens in 3 stages:

1) Loading  
2) Linking  
    a) Verification  
    b) Preparation  
    c) Resolution  
3) Initialization

‚ú® 1) Verification

‚úî What is Verification?

When JVM loads a class file, it checks whether the class file is safe, correct, and not tampered with.
A JVM component named Bytecode Verifier does this checking.
If something is suspicious ‚Üí JVM immediately stops program with:

java.lang.VerifyError

This protects Java from malware / unsafe code ‚Üí that‚Äôs why Java is called Highly Secure Language.

‚úî Why this is needed?

Because bytecode can be created from:

Java compiler
Third-party compilers
Malicious tools

So JVM must verify before running it.

‚≠ê Real-life Example:

Imagine airport security:
    You enter airport (class loading)
    Your bag is scanned (verification)
    If gun found ‚Üí security stops you (VerifyError)
JVM does the same with class file.

--------------------------------------------------------------

‚ú® 2) Preparation Phase (Easy Explanation)

This phase deals with static variables.

‚úî What JVM does here?

JVM allocates memory for all static variables and initializes them with default values, not your assigned values.

Example:    

    static int x = 100;

In Preparation phase:

    Memory allocated for x (4 bytes)
    x = 0 (default value of int)

Even if the variable is final static, it still gets default value first.

Example:    

    static final int y = 50;

During preparation:

    y gets default value ‚Üí 0

During initialization:

    y gets actual value ‚Üí 50

‚úî Static Object Reference Example:

    static Test t = new Test();

Preparation phase:

    memory given to reference t
    initialized with null

Size depends on JVM:

    32-bit JVM ‚Üí 4 bytes
    64-bit JVM ‚Üí 8 bytes

‚≠ê Real-Life Example:

Think of preparing a classroom:

    Desks arranged (memory allocated)
    All desks empty (default values)
    Later students come and sit (initialization)

--------------------------------------------------------------

‚ú® 3) Resolution Phase

Resolution means:

All symbolic references ‚Üí replaced by actual memory addresses

Symbolic reference = like a label (#7, #6 in constant pool)
Actual reference = real memory address
You can see symbolic references using:

javap -verbose MyClass.class

‚≠ê Real-Life Example:

You write in your mobile:

‚ÄúCall Mom‚Äù ‚Üí symbolic reference Phone internally resolves it into:

Mom = 9876543210 ‚Üí actual reference

--------------------------------------------------------------

‚ú® 4) Initialization Phase

This is where actual values are assigned.

In this phase:

    Static variables get their actual assigned values
    Static blocks execute
    They run top to bottom order
    Static block executes before main()

static int x = 10;

static {
   System.out.println(x);   // 10
}

public static void main(String[] args) {}

--------------------------------------------------------------

‚≠ê Can we write Java program without main()?

Yes (up to JDK 1.6).

Example:

class WithoutMain {
    static {
        System.out.println("Hello User!");
        System.exit(0);
    }
}

After JDK 1.7:

JVM checks for main() at load time ‚Üí if missing:

Error: main method not found

--------------------------------------------------------------

‚ú® Static Block / Static Initializer

‚úî Important properties:

1 > Static block executes automatically when the class loads.
2 > It executes only once.
3 > Used to initialize static fields.
4 > Executes before main().
5 > Multiple static blocks execute top ‚Üí bottom.
6 > You cannot write return statement inside static block.
7 > Blank static final variable must be initialized inside static block.

Example:

static final int A; // blank final

static {
    A = 10; // must be initialized here
}

--------------------------------------------------------------

‚ú® Illegal Forward Reference

‚úî What is illegal forward reference?‚úî What is illegal forward reference?

Inside static block:

    You can assign value to static variable before declaration.
    But you cannot read the variable before declaration.

Example:

static {
    x = 100;                 // üëç allowed (write allowed)
    System.out.println(x);   // ‚ùå illegal forward reference
}

static int x;

Why?

Because during compilation, compiler has not yet seen the declaration of x, so reading is not allowed.

But this is allowed:

System.out.println(ClassName.x);  // üëç allowed

Because using class name tells compiler that x is a class member.

--------------------------------------------------------------

‚ú® Inside Static Method ‚Üí No Restriction

public static void m1() {
    y = 200;          // write allowed
    System.out.println(y);   // read allowed
}

static int y;

Why allowed?
Because static methods are executed after class initialization ‚Üí compiler knows y already exists.

--------------------------------------------------------------

üî• REAL-LIFE EXAMPLE TO UNDERSTAND EVERYTHING

üéØ Think of a Cinema Hall

1) Loading

Cinema staff reads your ticket and allows entry inside the theater.

2) Verification

They check your bag for harmful items.
If something wrong ‚Üí you‚Äôre stopped.

Same as bytecode verification.

3) Preparation

Seats are arranged BEFORE audience comes ‚Üí
This is like static variables getting default values.

Seats = memory
Empty seats = default values

4) Resolution

Seat number on ticket (A10) ‚Üí you find the actual seat location in hall.
Same as symbolic reference ‚Üí direct reference.

5) Initialization

Audience now sits on those seats ‚Üí static variables get actual values

static block runs (like showing welcome screen)

Then movie starts ‚Üí main() method runs.

‚úÖ SUMMARY (Super Easy Table)

| Phase          | What Happens?                                      | Real Life Example                    |
| -------------- | -------------------------------------------------- | ------------------------------------ |
| Verification   | Safety checking of class                           | Bag checking at airport              |
| Preparation    | Memory allocation + default values for static vars | Arranging empty desks                |
| Resolution     | Convert symbolic ‚Üí actual references               | "Call Mom" ‚Üí number                  |
| Initialization | Assign actual values, run static blocks            | Students fill desks, welcome message |
